2024-05-05 05:46:00,636 INFO  Nagarro.VendingMachine.Program - Application started
2024-05-05 05:46:04,048 INFO  Nagarro.VendingMachine.Business.UseCases.LookUseCase - Look action performed
2024-05-05 05:47:29,118 INFO  Nagarro.VendingMachine.Program - Application started
2024-05-05 05:47:32,599 INFO  Nagarro.VendingMachine.Business.UseCases.LookUseCase - Look action performed
2024-05-05 05:56:45,740 INFO  Nagarro.VendingMachine.Program - Application started
2024-05-05 05:56:48,290 INFO  Nagarro.VendingMachine.Business.UseCases.LookUseCase - Look action performed
2024-05-05 06:03:05,001 INFO  Nagarro.VendingMachine.Program - Application started
2024-05-05 06:03:07,736 INFO  Nagarro.VendingMachine.Business.UseCases.LookUseCase - Look action performed
2024-05-05 06:25:03,812 INFO  Nagarro.VendingMachine.Program - Application started
2024-05-05 06:25:06,507 INFO  Nagarro.VendingMachine.Business.UseCases.LookUseCase - Look action performed
2024-05-05 06:25:14,475 INFO  Nagarro.VendingMachine.Business.Services.PaymentService.CashPayment - User made a cash payment
2024-05-05 06:25:14,476 INFO  Nagarro.VendingMachine.Business.UseCases.BuyUseCase - Chocolate bought
2024-05-05 06:25:21,408 INFO  Nagarro.VendingMachine.Business.UseCases.LoginUseCase - User logged in
2024-05-05 06:25:23,695 INFO  Nagarro.VendingMachine.Business.Services.ReportService.ReportService - User generated a xml report for Stock
2024-05-05 06:25:25,991 INFO  Nagarro.VendingMachine.Business.Services.ReportService.ReportService - User generated a xml report for Sales
2024-05-05 06:25:39,480 INFO  Nagarro.VendingMachine.Business.Services.ReportService.ReportService - User generated a xml report for Volume
2024-05-05 06:27:28,308 INFO  Nagarro.VendingMachine.Program - Application started
2024-05-05 06:27:32,882 INFO  Nagarro.VendingMachine.Business.UseCases.LookUseCase - Look action performed
2024-05-05 06:27:36,096 INFO  Nagarro.VendingMachine.Business.UseCases.LoginUseCase - User logged in
2024-05-05 06:27:46,291 INFO  Nagarro.VendingMachine.Business.Services.ReportService.ReportService - User generated a xml report for Volume
2024-05-05 06:28:53,194 INFO  Nagarro.VendingMachine.Program - Application started
2024-05-05 06:28:57,270 INFO  Nagarro.VendingMachine.Business.UseCases.LoginUseCase - User logged in
2024-05-05 06:29:11,533 INFO  Nagarro.VendingMachine.Business.Services.ReportService.ReportService - User generated a xml report for Volume
2024-05-05 06:41:13,458 INFO  Nagarro.VendingMachine.Program - Application started
2024-05-05 06:41:28,846 INFO  Nagarro.VendingMachine.Business.UseCases.LookUseCase - Look action performed
2024-05-05 06:42:25,004 INFO  Nagarro.VendingMachine.Business.Services.PaymentService.CashPayment - User made a cash payment
2024-05-05 06:42:25,004 INFO  Nagarro.VendingMachine.Business.UseCases.BuyUseCase - Still water bought
2024-05-05 06:42:25,030 ERROR Nagarro.VendingMachine.VendingMachineApplication - Oh no, your product (Still water) is stuck in the machine! Please contact the administrator!
Nagarro.VendingMachine.Business.Exceptions.ProductStuckException: Oh no, your product (Still water) is stuck in the machine! Please contact the administrator!
   at Nagarro.VendingMachine.Business.UseCases.BuyUseCase.Execute() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Business\UseCases\BuyUseCase.cs:line 55
   at Nagarro.VendingMachine.Presentation.Commands.BuyCommand.Execute() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Presentation\Commands\BuyCommand.cs:line 26
   at Nagarro.VendingMachine.VendingMachineApplication.Run() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine\VendingMachineApplication.cs:line 32
2024-05-05 06:43:12,263 INFO  Nagarro.VendingMachine.Business.Services.PaymentService.CardPayment - User made a card payment
2024-05-05 06:43:12,264 INFO  Nagarro.VendingMachine.Business.UseCases.BuyUseCase - Pepsi bought
2024-05-05 06:43:25,675 ERROR Nagarro.VendingMachine.VendingMachineApplication - The requested product (Pepsi) is out of stock!
Nagarro.VendingMachine.Business.Exceptions.InsufficientStockException: The requested product (Pepsi) is out of stock!
   at Nagarro.VendingMachine.Business.UseCases.BuyUseCase.Execute() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Business\UseCases\BuyUseCase.cs:line 39
   at Nagarro.VendingMachine.Presentation.Commands.BuyCommand.Execute() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Presentation\Commands\BuyCommand.cs:line 26
   at Nagarro.VendingMachine.VendingMachineApplication.Run() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine\VendingMachineApplication.cs:line 32
2024-05-05 06:43:33,954 INFO  Nagarro.VendingMachine.Business.UseCases.LookUseCase - Look action performed
2024-05-05 06:43:40,754 ERROR Nagarro.VendingMachine.VendingMachineApplication - The instance of entity type 'Sale' cannot be tracked because another instance with the same key value for {'Name'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
System.InvalidOperationException: The instance of entity type 'Sale' cannot be tracked because another instance with the same key value for {'Name'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.NullableKeyIdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintAction(EntityEntryGraphNode`1 node)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraph[TState](EntityEntryGraphNode`1 node, Func`2 handleNode)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraph(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.SetEntityState(InternalEntityEntry entry, EntityState entityState)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at Nagarro.VendingMachine.DataAccess.SQLite.SqliteDbSaleRepositoryEF.Add(Sale newSale) in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.DataAccess\SQLite\SqliteDbSaleRepositoryEF.cs:line 41
   at Nagarro.VendingMachine.Business.Services.PaymentService.PaymentService.Execute(Product product) in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Business\Services\PaymentService\PaymentService.cs:line 33
   at Nagarro.VendingMachine.Business.UseCases.BuyUseCase.Execute() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Business\UseCases\BuyUseCase.cs:line 47
   at Nagarro.VendingMachine.Presentation.Commands.BuyCommand.Execute() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Presentation\Commands\BuyCommand.cs:line 26
   at Nagarro.VendingMachine.VendingMachineApplication.Run() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine\VendingMachineApplication.cs:line 32
2024-05-05 06:45:03,817 ERROR Nagarro.VendingMachine.VendingMachineApplication - The instance of entity type 'Sale' cannot be tracked because another instance with the same key value for {'Name'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
System.InvalidOperationException: The instance of entity type 'Sale' cannot be tracked because another instance with the same key value for {'Name'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.NullableKeyIdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintAction(EntityEntryGraphNode`1 node)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraph[TState](EntityEntryGraphNode`1 node, Func`2 handleNode)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraph(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.SetEntityState(InternalEntityEntry entry, EntityState entityState)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at Nagarro.VendingMachine.DataAccess.SQLite.SqliteDbSaleRepositoryEF.Add(Sale newSale) in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.DataAccess\SQLite\SqliteDbSaleRepositoryEF.cs:line 41
   at Nagarro.VendingMachine.Business.Services.PaymentService.PaymentService.Execute(Product product) in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Business\Services\PaymentService\PaymentService.cs:line 33
   at Nagarro.VendingMachine.Business.UseCases.BuyUseCase.Execute() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Business\UseCases\BuyUseCase.cs:line 47
   at Nagarro.VendingMachine.Presentation.Commands.BuyCommand.Execute() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Presentation\Commands\BuyCommand.cs:line 26
   at Nagarro.VendingMachine.VendingMachineApplication.Run() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine\VendingMachineApplication.cs:line 32
2024-05-05 06:45:18,669 INFO  Nagarro.VendingMachine.Program - Application started
2024-05-05 06:45:30,831 ERROR Nagarro.VendingMachine.VendingMachineApplication - An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Sales.Name'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__104_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.Storage.NonRetryingExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at Nagarro.VendingMachine.DataAccess.SQLite.SqliteDbSaleRepositoryEF.Add(Sale newSale) in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.DataAccess\SQLite\SqliteDbSaleRepositoryEF.cs:line 42
   at Nagarro.VendingMachine.Business.Services.PaymentService.PaymentService.Execute(Product product) in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Business\Services\PaymentService\PaymentService.cs:line 33
   at Nagarro.VendingMachine.Business.UseCases.BuyUseCase.Execute() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Business\UseCases\BuyUseCase.cs:line 47
   at Nagarro.VendingMachine.Presentation.Commands.BuyCommand.Execute() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Presentation\Commands\BuyCommand.cs:line 26
   at Nagarro.VendingMachine.VendingMachineApplication.Run() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine\VendingMachineApplication.cs:line 32
2024-05-05 06:46:06,801 INFO  Nagarro.VendingMachine.Business.UseCases.LoginUseCase - User logged in
2024-05-05 06:46:08,488 INFO  Nagarro.VendingMachine.Business.Services.ReportService.ReportService - User generated a xml report for Sales
2024-05-05 06:47:31,319 INFO  Nagarro.VendingMachine.Business.Services.ReportService.ReportService - User generated a xml report for Volume
2024-05-05 06:48:49,917 INFO  Nagarro.VendingMachine.Program - Application started
2024-05-05 06:48:58,884 ERROR Nagarro.VendingMachine.VendingMachineApplication - An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Sales.Name'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__104_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.Storage.NonRetryingExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at Nagarro.VendingMachine.DataAccess.SQLite.SqliteDbSaleRepositoryEF.Add(Sale newSale) in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.DataAccess\SQLite\SqliteDbSaleRepositoryEF.cs:line 42
   at Nagarro.VendingMachine.Business.Services.PaymentService.PaymentService.Execute(Product product) in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Business\Services\PaymentService\PaymentService.cs:line 33
   at Nagarro.VendingMachine.Business.UseCases.BuyUseCase.Execute() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Business\UseCases\BuyUseCase.cs:line 47
   at Nagarro.VendingMachine.Presentation.Commands.BuyCommand.Execute() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Presentation\Commands\BuyCommand.cs:line 26
   at Nagarro.VendingMachine.VendingMachineApplication.Run() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine\VendingMachineApplication.cs:line 32
2024-05-05 06:50:49,144 INFO  Nagarro.VendingMachine.Program - Application started
2024-05-05 06:50:55,682 ERROR Nagarro.VendingMachine.VendingMachineApplication - An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Sales.Name'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__104_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.Storage.NonRetryingExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at Nagarro.VendingMachine.DataAccess.SQLite.SqliteDbSaleRepositoryEF.Add(Sale newSale) in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.DataAccess\SQLite\SqliteDbSaleRepositoryEF.cs:line 42
   at Nagarro.VendingMachine.Business.Services.PaymentService.PaymentService.Execute(Product product) in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Business\Services\PaymentService\PaymentService.cs:line 33
   at Nagarro.VendingMachine.Business.UseCases.BuyUseCase.Execute() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Business\UseCases\BuyUseCase.cs:line 47
   at Nagarro.VendingMachine.Presentation.Commands.BuyCommand.Execute() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Presentation\Commands\BuyCommand.cs:line 26
   at Nagarro.VendingMachine.VendingMachineApplication.Run() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine\VendingMachineApplication.cs:line 32
2024-05-05 06:53:53,737 INFO  Nagarro.VendingMachine.Program - Application started
2024-05-05 06:54:04,464 INFO  Nagarro.VendingMachine.Business.Services.PaymentService.CashPayment - User made a cash payment
2024-05-05 06:54:04,464 INFO  Nagarro.VendingMachine.Business.UseCases.BuyUseCase - Chocolate bought
2024-05-05 06:54:09,007 INFO  Nagarro.VendingMachine.Business.UseCases.LookUseCase - Look action performed
2024-05-05 06:54:18,178 ERROR Nagarro.VendingMachine.VendingMachineApplication - The instance of entity type 'Sale' cannot be tracked because another instance with the same key value for {'Name'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
System.InvalidOperationException: The instance of entity type 'Sale' cannot be tracked because another instance with the same key value for {'Name'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.NullableKeyIdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintAction(EntityEntryGraphNode`1 node)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraph[TState](EntityEntryGraphNode`1 node, Func`2 handleNode)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraph(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.SetEntityState(InternalEntityEntry entry, EntityState entityState)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at Nagarro.VendingMachine.DataAccess.SQLite.SqliteDbSaleRepositoryEF.Add(Sale newSale) in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.DataAccess\SQLite\SqliteDbSaleRepositoryEF.cs:line 41
   at Nagarro.VendingMachine.Business.Services.PaymentService.PaymentService.Execute(Product product) in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Business\Services\PaymentService\PaymentService.cs:line 33
   at Nagarro.VendingMachine.Business.UseCases.BuyUseCase.Execute() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Business\UseCases\BuyUseCase.cs:line 47
   at Nagarro.VendingMachine.Presentation.Commands.BuyCommand.Execute() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Presentation\Commands\BuyCommand.cs:line 26
   at Nagarro.VendingMachine.VendingMachineApplication.Run() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine\VendingMachineApplication.cs:line 32
2024-05-05 06:55:24,652 INFO  Nagarro.VendingMachine.Program - Application started
2024-05-05 06:55:33,032 INFO  Nagarro.VendingMachine.Business.Services.PaymentService.CashPayment - User made a cash payment
2024-05-05 06:55:33,032 INFO  Nagarro.VendingMachine.Business.UseCases.BuyUseCase - Chocolate bought
2024-05-05 06:55:41,171 ERROR Nagarro.VendingMachine.VendingMachineApplication - The instance of entity type 'Sale' cannot be tracked because another instance with the same key value for {'Name'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
System.InvalidOperationException: The instance of entity type 'Sale' cannot be tracked because another instance with the same key value for {'Name'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.NullableKeyIdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintAction(EntityEntryGraphNode`1 node)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraph[TState](EntityEntryGraphNode`1 node, Func`2 handleNode)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraph(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.SetEntityState(InternalEntityEntry entry, EntityState entityState)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at Nagarro.VendingMachine.DataAccess.SQLite.SqliteDbSaleRepositoryEF.Add(Sale newSale) in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.DataAccess\SQLite\SqliteDbSaleRepositoryEF.cs:line 41
   at Nagarro.VendingMachine.Business.Services.PaymentService.PaymentService.Execute(Product product) in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Business\Services\PaymentService\PaymentService.cs:line 33
   at Nagarro.VendingMachine.Business.UseCases.BuyUseCase.Execute() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Business\UseCases\BuyUseCase.cs:line 47
   at Nagarro.VendingMachine.Presentation.Commands.BuyCommand.Execute() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Presentation\Commands\BuyCommand.cs:line 26
   at Nagarro.VendingMachine.VendingMachineApplication.Run() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine\VendingMachineApplication.cs:line 32
2024-05-31 18:48:11,353 INFO  Nagarro.VendingMachine.Program - Application started
2024-05-31 18:48:21,426 INFO  Nagarro.VendingMachine.Business.Services.PaymentService.CashPayment - User made a cash payment
2024-05-31 18:48:21,426 INFO  Nagarro.VendingMachine.Business.UseCases.BuyUseCase - Chocolate bought
2024-05-31 18:48:27,368 ERROR Nagarro.VendingMachine.VendingMachineApplication - The instance of entity type 'Sale' cannot be tracked because another instance with the same key value for {'Name'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
System.InvalidOperationException: The instance of entity type 'Sale' cannot be tracked because another instance with the same key value for {'Name'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.NullableKeyIdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintAction(EntityEntryGraphNode`1 node)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraph[TState](EntityEntryGraphNode`1 node, Func`2 handleNode)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraph(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.SetEntityState(InternalEntityEntry entry, EntityState entityState)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at Nagarro.VendingMachine.DataAccess.SQLite.SqliteDbSaleRepositoryEF.Add(Sale newSale) in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.DataAccess\SQLite\SqliteDbSaleRepositoryEF.cs:line 41
   at Nagarro.VendingMachine.Business.Services.PaymentService.PaymentService.Execute(Product product) in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Business\Services\PaymentService\PaymentService.cs:line 33
   at Nagarro.VendingMachine.Business.UseCases.BuyUseCase.Execute() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Business\UseCases\BuyUseCase.cs:line 47
   at Nagarro.VendingMachine.Presentation.Commands.BuyCommand.Execute() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Presentation\Commands\BuyCommand.cs:line 26
   at Nagarro.VendingMachine.VendingMachineApplication.Run() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine\VendingMachineApplication.cs:line 32
2024-05-31 18:49:34,701 INFO  Nagarro.VendingMachine.Program - Application started
2024-05-31 18:49:39,696 ERROR Nagarro.VendingMachine.VendingMachineApplication - An exception was thrown while activating Nagarro.VendingMachine.Business.UseCases.BuyUseCase -> Nagarro.VendingMachine.DataAccess.SQLite.SqliteDbProductRepositoryEF.
Autofac.Core.DependencyResolutionException: An exception was thrown while activating Nagarro.VendingMachine.Business.UseCases.BuyUseCase -> Nagarro.VendingMachine.DataAccess.SQLite.SqliteDbProductRepositoryEF.
 ---> Autofac.Core.DependencyResolutionException: An exception was thrown while invoking the constructor 'Void .ctor(Nagarro.VendingMachine.DataAccess.VendingMachineContext)' on type 'SqliteDbProductRepositoryEF'.
 ---> System.InvalidOperationException: The entity type 'Sale' requires a primary key to be defined. If you intended to use a keyless entity type, call 'HasNoKey' in 'OnModelCreating'. For more information on keyless entity types, see https://go.microsoft.com/fwlink/?linkid=2141943.
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.ValidateNonNullPrimaryKeys(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.RelationalModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Sqlite.Infrastructure.Internal.SqliteModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelRuntimeInitializer.Initialize(IModel model, Boolean designTime, IDiagnosticsLogger`1 validationLogger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel(Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()
   at Microsoft.EntityFrameworkCore.Infrastructure.EntityFrameworkServicesBuilder.<>c.<TryAddCoreServices>b__8_4(IServiceProvider p)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_InternalServiceProvider()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Infrastructure.IInfrastructure<System.IServiceProvider>.get_Instance()
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.InfrastructureExtensions.GetService[TService](IInfrastructure`1 accessor)
   at Microsoft.EntityFrameworkCore.Infrastructure.AccessorExtensions.GetService[TService](IInfrastructure`1 accessor)
   at Microsoft.EntityFrameworkCore.Infrastructure.DatabaseFacade.get_Dependencies()
   at Microsoft.EntityFrameworkCore.Infrastructure.DatabaseFacade.EnsureCreated()
   at lambda_method9(Closure , Object[] )
   at Autofac.Core.Activators.Reflection.BoundConstructor.Instantiate()
   --- End of inner exception stack trace ---
   at Autofac.Core.Activators.Reflection.BoundConstructor.Instantiate()
   at Autofac.Core.Activators.Reflection.ReflectionActivator.<>c__DisplayClass14_0.<UseSingleConstructorActivation>b__0(ResolveRequestContext context, Action`1 next)
   at Autofac.Core.Resolving.Middleware.DelegateMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext context)
   at Autofac.Core.Resolving.Middleware.DisposalTrackingMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext context)
   at Autofac.Core.Resolving.Middleware.ActivatorErrorHandlingMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   --- End of inner exception stack trace ---
   at Autofac.Core.Resolving.Middleware.ActivatorErrorHandlingMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext context)
   at Autofac.Core.Pipeline.ResolvePipeline.Invoke(ResolveRequestContext context)
   at Autofac.Core.Resolving.Middleware.RegistrationPipelineInvokeMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext context)
   at Autofac.Core.Resolving.Middleware.SharingMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext context)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext context)
   at Autofac.Core.Resolving.Middleware.CircularDependencyDetectorMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext context)
   at Autofac.Core.Pipeline.ResolvePipeline.Invoke(ResolveRequestContext context)
   at Autofac.Core.Resolving.ResolveOperation.GetOrCreateInstance(ISharingLifetimeScope currentOperationScope, ResolveRequest& request)
   at Autofac.Core.Resolving.ResolveOperation.ExecuteOperation(ResolveRequest& request)
   at Autofac.Core.Resolving.ResolveOperation.Execute(ResolveRequest& request)
   at Autofac.Core.Lifetime.LifetimeScope.ResolveComponent(ResolveRequest& request)
   at Autofac.Core.Lifetime.LifetimeScope.Autofac.IComponentContext.ResolveComponent(ResolveRequest& request)
   at Autofac.ResolutionExtensions.TryResolveService(IComponentContext context, Service service, IEnumerable`1 parameters, Object& instance)
   at Autofac.ResolutionExtensions.ResolveService(IComponentContext context, Service service, IEnumerable`1 parameters)
   at Autofac.ResolutionExtensions.Resolve(IComponentContext context, Type serviceType, IEnumerable`1 parameters)
   at Autofac.ResolutionExtensions.Resolve[TService](IComponentContext context, IEnumerable`1 parameters)
   at Autofac.ResolutionExtensions.Resolve[TService](IComponentContext context)
   at Nagarro.VendingMachine.UseCaseFactory.Create[TUseCase]() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine\UseCaseFactory.cs:line 17
   at Nagarro.VendingMachine.Presentation.Commands.BuyCommand.Execute() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Presentation\Commands\BuyCommand.cs:line 26
   at Nagarro.VendingMachine.VendingMachineApplication.Run() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine\VendingMachineApplication.cs:line 32
2024-05-31 18:50:12,151 INFO  Nagarro.VendingMachine.Program - Application started
2024-05-31 18:50:15,378 ERROR Nagarro.VendingMachine.VendingMachineApplication - An exception was thrown while activating Nagarro.VendingMachine.Business.UseCases.BuyUseCase -> Nagarro.VendingMachine.DataAccess.SQLite.SqliteDbProductRepositoryEF.
Autofac.Core.DependencyResolutionException: An exception was thrown while activating Nagarro.VendingMachine.Business.UseCases.BuyUseCase -> Nagarro.VendingMachine.DataAccess.SQLite.SqliteDbProductRepositoryEF.
 ---> Autofac.Core.DependencyResolutionException: An exception was thrown while invoking the constructor 'Void .ctor(Nagarro.VendingMachine.DataAccess.VendingMachineContext)' on type 'SqliteDbProductRepositoryEF'.
 ---> System.InvalidOperationException: The entity type 'Sale' requires a primary key to be defined. If you intended to use a keyless entity type, call 'HasNoKey' in 'OnModelCreating'. For more information on keyless entity types, see https://go.microsoft.com/fwlink/?linkid=2141943.
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.ValidateNonNullPrimaryKeys(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.RelationalModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Sqlite.Infrastructure.Internal.SqliteModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelRuntimeInitializer.Initialize(IModel model, Boolean designTime, IDiagnosticsLogger`1 validationLogger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel(Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()
   at Microsoft.EntityFrameworkCore.Infrastructure.EntityFrameworkServicesBuilder.<>c.<TryAddCoreServices>b__8_4(IServiceProvider p)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_InternalServiceProvider()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Infrastructure.IInfrastructure<System.IServiceProvider>.get_Instance()
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.InfrastructureExtensions.GetService[TService](IInfrastructure`1 accessor)
   at Microsoft.EntityFrameworkCore.Infrastructure.AccessorExtensions.GetService[TService](IInfrastructure`1 accessor)
   at Microsoft.EntityFrameworkCore.Infrastructure.DatabaseFacade.get_Dependencies()
   at Microsoft.EntityFrameworkCore.Infrastructure.DatabaseFacade.EnsureCreated()
   at lambda_method9(Closure , Object[] )
   at Autofac.Core.Activators.Reflection.BoundConstructor.Instantiate()
   --- End of inner exception stack trace ---
   at Autofac.Core.Activators.Reflection.BoundConstructor.Instantiate()
   at Autofac.Core.Activators.Reflection.ReflectionActivator.<>c__DisplayClass14_0.<UseSingleConstructorActivation>b__0(ResolveRequestContext context, Action`1 next)
   at Autofac.Core.Resolving.Middleware.DelegateMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext context)
   at Autofac.Core.Resolving.Middleware.DisposalTrackingMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext context)
   at Autofac.Core.Resolving.Middleware.ActivatorErrorHandlingMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   --- End of inner exception stack trace ---
   at Autofac.Core.Resolving.Middleware.ActivatorErrorHandlingMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext context)
   at Autofac.Core.Pipeline.ResolvePipeline.Invoke(ResolveRequestContext context)
   at Autofac.Core.Resolving.Middleware.RegistrationPipelineInvokeMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext context)
   at Autofac.Core.Resolving.Middleware.SharingMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext context)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext context)
   at Autofac.Core.Resolving.Middleware.CircularDependencyDetectorMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext context)
   at Autofac.Core.Pipeline.ResolvePipeline.Invoke(ResolveRequestContext context)
   at Autofac.Core.Resolving.ResolveOperation.GetOrCreateInstance(ISharingLifetimeScope currentOperationScope, ResolveRequest& request)
   at Autofac.Core.Resolving.ResolveOperation.ExecuteOperation(ResolveRequest& request)
   at Autofac.Core.Resolving.ResolveOperation.Execute(ResolveRequest& request)
   at Autofac.Core.Lifetime.LifetimeScope.ResolveComponent(ResolveRequest& request)
   at Autofac.Core.Lifetime.LifetimeScope.Autofac.IComponentContext.ResolveComponent(ResolveRequest& request)
   at Autofac.ResolutionExtensions.TryResolveService(IComponentContext context, Service service, IEnumerable`1 parameters, Object& instance)
   at Autofac.ResolutionExtensions.ResolveService(IComponentContext context, Service service, IEnumerable`1 parameters)
   at Autofac.ResolutionExtensions.Resolve(IComponentContext context, Type serviceType, IEnumerable`1 parameters)
   at Autofac.ResolutionExtensions.Resolve[TService](IComponentContext context, IEnumerable`1 parameters)
   at Autofac.ResolutionExtensions.Resolve[TService](IComponentContext context)
   at Nagarro.VendingMachine.UseCaseFactory.Create[TUseCase]() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine\UseCaseFactory.cs:line 17
   at Nagarro.VendingMachine.Presentation.Commands.BuyCommand.Execute() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Presentation\Commands\BuyCommand.cs:line 26
   at Nagarro.VendingMachine.VendingMachineApplication.Run() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine\VendingMachineApplication.cs:line 32
2024-05-31 18:50:30,200 INFO  Nagarro.VendingMachine.Program - Application started
2024-05-31 18:50:44,942 INFO  Nagarro.VendingMachine.Program - Application started
2024-05-31 18:50:56,636 INFO  Nagarro.VendingMachine.Business.Services.PaymentService.CashPayment - User made a cash payment
2024-05-31 18:50:56,636 INFO  Nagarro.VendingMachine.Business.UseCases.BuyUseCase - Chocolate bought
2024-05-31 18:51:09,606 ERROR Nagarro.VendingMachine.VendingMachineApplication - An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Sales.Name'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__104_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.Storage.NonRetryingExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at Nagarro.VendingMachine.DataAccess.SQLite.SqliteDbSaleRepositoryEF.Add(Sale newSale) in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.DataAccess\SQLite\SqliteDbSaleRepositoryEF.cs:line 42
   at Nagarro.VendingMachine.Business.Services.PaymentService.PaymentService.Execute(Product product) in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Business\Services\PaymentService\PaymentService.cs:line 33
   at Nagarro.VendingMachine.Business.UseCases.BuyUseCase.Execute() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Business\UseCases\BuyUseCase.cs:line 47
   at Nagarro.VendingMachine.Presentation.Commands.BuyCommand.Execute() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Presentation\Commands\BuyCommand.cs:line 26
   at Nagarro.VendingMachine.VendingMachineApplication.Run() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine\VendingMachineApplication.cs:line 32
2024-05-31 18:55:44,337 INFO  Nagarro.VendingMachine.Program - Application started
2024-05-31 18:55:55,077 INFO  Nagarro.VendingMachine.Business.Services.PaymentService.CashPayment - User made a cash payment
2024-05-31 18:55:55,077 INFO  Nagarro.VendingMachine.Business.UseCases.BuyUseCase - Chocolate bought
2024-05-31 18:56:01,195 ERROR Nagarro.VendingMachine.VendingMachineApplication - The instance of entity type 'Sale' cannot be tracked because another instance with the same key value for {'Name'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
System.InvalidOperationException: The instance of entity type 'Sale' cannot be tracked because another instance with the same key value for {'Name'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.NullableKeyIdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintAction(EntityEntryGraphNode`1 node)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraph[TState](EntityEntryGraphNode`1 node, Func`2 handleNode)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraph(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.SetEntityState(InternalEntityEntry entry, EntityState entityState)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at Nagarro.VendingMachine.DataAccess.SQLite.SqliteDbSaleRepositoryEF.Add(Sale newSale) in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.DataAccess\SQLite\SqliteDbSaleRepositoryEF.cs:line 42
   at Nagarro.VendingMachine.Business.Services.PaymentService.PaymentService.Execute(Product product) in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Business\Services\PaymentService\PaymentService.cs:line 33
   at Nagarro.VendingMachine.Business.UseCases.BuyUseCase.Execute() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Business\UseCases\BuyUseCase.cs:line 47
   at Nagarro.VendingMachine.Presentation.Commands.BuyCommand.Execute() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Presentation\Commands\BuyCommand.cs:line 26
   at Nagarro.VendingMachine.VendingMachineApplication.Run() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine\VendingMachineApplication.cs:line 32
2024-05-31 18:56:51,754 INFO  Nagarro.VendingMachine.Program - Application started
2024-05-31 18:57:00,297 INFO  Nagarro.VendingMachine.Business.Services.PaymentService.CashPayment - User made a cash payment
2024-05-31 18:57:00,297 INFO  Nagarro.VendingMachine.Business.UseCases.BuyUseCase - Chocolate bought
2024-05-31 18:57:08,953 ERROR Nagarro.VendingMachine.VendingMachineApplication - An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Sales.Name'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__104_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.Storage.NonRetryingExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at Nagarro.VendingMachine.DataAccess.SQLite.SqliteDbSaleRepositoryEF.Add(Sale newSale) in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.DataAccess\SQLite\SqliteDbSaleRepositoryEF.cs:line 43
   at Nagarro.VendingMachine.Business.Services.PaymentService.PaymentService.Execute(Product product) in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Business\Services\PaymentService\PaymentService.cs:line 33
   at Nagarro.VendingMachine.Business.UseCases.BuyUseCase.Execute() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Business\UseCases\BuyUseCase.cs:line 47
   at Nagarro.VendingMachine.Presentation.Commands.BuyCommand.Execute() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Presentation\Commands\BuyCommand.cs:line 26
   at Nagarro.VendingMachine.VendingMachineApplication.Run() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine\VendingMachineApplication.cs:line 32
2024-05-31 19:00:09,336 INFO  Nagarro.VendingMachine.Program - Application started
2024-05-31 19:00:31,066 INFO  Nagarro.VendingMachine.Business.Services.PaymentService.CashPayment - User made a cash payment
2024-05-31 19:00:31,067 INFO  Nagarro.VendingMachine.Business.UseCases.BuyUseCase - Chocolate bought
2024-05-31 19:00:37,217 ERROR Nagarro.VendingMachine.VendingMachineApplication - The instance of entity type 'Sale' cannot be tracked because another instance with the same key value for {'Name'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
System.InvalidOperationException: The instance of entity type 'Sale' cannot be tracked because another instance with the same key value for {'Name'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.NullableKeyIdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintAction(EntityEntryGraphNode`1 node)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraph[TState](EntityEntryGraphNode`1 node, Func`2 handleNode)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraph(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.SetEntityState(InternalEntityEntry entry, EntityState entityState)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at Nagarro.VendingMachine.DataAccess.SQLite.SqliteDbSaleRepositoryEF.Add(Sale newSale) in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.DataAccess\SQLite\SqliteDbSaleRepositoryEF.cs:line 42
   at Nagarro.VendingMachine.Business.Services.PaymentService.PaymentService.Execute(Product product) in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Business\Services\PaymentService\PaymentService.cs:line 33
   at Nagarro.VendingMachine.Business.UseCases.BuyUseCase.Execute() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Business\UseCases\BuyUseCase.cs:line 47
   at Nagarro.VendingMachine.Presentation.Commands.BuyCommand.Execute() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine.Presentation\Commands\BuyCommand.cs:line 26
   at Nagarro.VendingMachine.VendingMachineApplication.Run() in C:\Users\alexo\Downloads\RL_Alexandru_Lorintz\vending-machine\sources\VendingMachine\VendingMachineApplication.cs:line 32
